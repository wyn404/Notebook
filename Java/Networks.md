## [应用层常见的协议](#jump1)
## [TCP三次握手和四次挥手](#jump2)
## [TCP，UDP协议的区别](#jump3)
## [TCP协议如何保证可靠传输](#jump4)
## [在浏览器中输入url地址->>显示主页的过程](#jump5)
## [Cookie的作用是什么，和Session有什么区别](#jump6)
## [HTTP和HTTPS](#jump7)
## [HTTP 1.0和HTTP 1.1](#jump8)


## 应用层常见的协议
<span id="jump1">

* __HTTP协议__：超文本传输协议主要是为Web浏览器与Web服务器之间的通信而设计的。HTTP协议基于TCP协议，发送HTTP请求之前首先要建立TCP连接也就是要经历3次握手。此外，HTTP协议是“无状态”的协议，它无法记录客户端用户的状态，一般通过Session来记录客户端用户的状态。目前使用的HTTP协议大部分都是1.1。

* __SMTP协议__：简单邮件传输协议基于TCP协议，用来发送电子邮件。__接受__邮件的协议不是SMTP而是POP3协议。
    - __电子邮件的发送过程__：
    1. 通过SMTP协议，将写好的邮件交给邮箱服务器A。
    2. 邮箱服务器A发现发送的邮箱，然后使用SMTP协议将邮件发送到邮箱服务器B。
    3. 邮箱服务器B接受邮件之后通知用户来收邮件，然后用户通过POP3/IMAP协议将邮件取出。
    - __判断邮箱地址是否真正存在__：
    1. 查找邮箱域名对应的SMTP服务器地址。
    2. 尝试与服务器建立连接。
    3. 连接成功后尝试向需要验证的邮箱发送邮件。
    4. 根据返回结果判定邮箱地址的真实性。

* __POP3/IMAP协议__：两者都是负责邮件接收的协议。SMTP协议只负责邮件的发送，真正负责接收的协议是POP3/IMAP。

* __FTP协议__：FTP协议提供文件传输服务，基于TCP实现可靠的传输。使用FTP协议的好处是可以屏蔽操作系统和文件存储方式。FTP基于客户——服务器(C/S)模型而设计的，在客户端与FTP服务器之间建立两个连接。

> FTP独特的优势同时也是与其他客户服务器程序最大的不同点就在于它在两台通信的主机之间使用了两条TCP连接(其他客户服务器应用程序一般只有一条TCP连接):
> 1. 控制连接：用于传送控制信息(命令和响应)
> 2. 数据连接：用户数据传送。

* __Telnet协议__：Telnet协议通过一个终端登录到其他服务器，建立在可靠的传输协议TCP之上。最大缺点之一是所有数据(包括用户名和密码)均以明文形式发送，存在潜在的安全风险。
* __SSH协议__：SSH协议是目前较可靠，为远程登录会话和其他网络服务提供安全性的协议。利用SSH协议可以有效防止远程管理过程中的信息泄露问题。SSH建立在可靠的传输协议TCP之上。

    __Telnet协议和SSH协议之间的主要区别在于SSH协议会对传输的数据进行加密保证数据的安全性。__
</span>

## TCP三次握手和四次挥手
<span id="jump2">

__三次握手__：
* 客户端-发送带有SYN标志的数据包-一次握手-服务端
* 服务端-发送带有SYN/ACK标志的数据包-二次握手-客户端
* 客户端-发送带有ACK标志的数据包-三次握手-服务端

__三次握手的目的是建立可靠的通信信道，通讯就是指数据的发送与接收，三次握手最主要的目的是双方确认自己与对方的发送与接收是正常的。__

__四次挥手__：
* 客户端-发送一个FIN，用来关闭客户端到服务器的数据传送
* 服务器-收到这个FIN，它发回一个ACK，确认序号为收到的序号加1。和SYN一样，一个FIN将占用一个序号。
* 服务器-关闭与客户端的连接，发送一个FIN给客户端。
* 客户端-发回ACK报文确认，并将确认序号给设置为收到序号加1。
</span>

## TCP,UDP协议的区别
<span id="jump3">

* 用户数据报UDP(User Datagram Protocol)是无连接的，尽最大可能交付，没有拥塞控制，面向报文(对于应用程序传下来的报文不合并也不拆分，只是添加UDP首部)，支持一对一、一对多、多对一和多对多的交互通信。

* 传输控制协议TCP(Transmission Control Protocol)是面向连接的，提供可靠交付，有流量控制，拥塞控制，提供全双工通信，面向字节流(把应用层传下来的报文看成字节流，把字节流组织成大小不等的数据块)，没一条TCP连接只能是点对点的(一对一)。

</span>

## TCP协议如何保证可靠传输
<span id="jump4">

1. 应用数据被分割成TCP认为最适合发送的数据块。
2. TCP给发送的每一个包进行编号，接收方对数据包进行排序，把有序数据传送给应用层。
3. __校验和__：TCP将保持它首部和数据的校验和。这是一个端到端的检验和，目的是检测数据在传输过程中的任何变化。如果收到段的校验和有差错，TCP将丢弃这个报文段和不确认收到此报文段。
4. TCP接收端会丢弃重复的数据。
5. __流量控制__：TCP连接的每一方都有固定大小的缓冲空间，TCP的接收端只允许发送端发送接收端缓冲区能接纳的数据。当接收方来不及处理发送方的数据，能提示发送方降低发送的速率，防止包丢失。TCP使用的流量控制协议是可变大小的滑动窗口协议。(TCP利用滑动窗口实现流量控制)
6. __拥塞控制__：当网络拥塞时，减少数据的发送。
7. __ARQ协议__：基本原理是每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组。
8. __超时重传__：当TCP发送一个段后，会启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段。
</span>

## 在浏览器中输入url地址->>显示主页的过程
<span id="#jump5">

__过程__：

1. 浏览器查找域名的IP地址(DNS查找过程：浏览器缓存、路由器缓存、DNS缓存)。
2. 浏览器向web服务器发送一个HTTP请求(cookies会随着请求发送给服务器)。
3. 服务器处理器请求(请求 处理请求 & 它的参数、cookies、生成一个HTML响应)。
4. 服务器发回一个HTML响应。
5. 浏览器开始显示HTML。

__使用的协议__：

* DNS：获取域名对应IP
* TCP：与服务器建立TCP连接
* IP：建立TCP协议时，需要发送数据，发送数据在网络层使用IP协议
* OPSF：IP数据包在路由器之间，路由选择使用OPSF协议
* ARP：路由器与服务器通信时，需要将ip地址转换为MAC地址，需要使用ARP协议
* HTTP：在TCP建立完成后，使用HTTP协议访问网页

</span>

## Cookie的作用是什么，和Session有什么区别
<span id="jump6">
Cookie和Session都是用来跟踪浏览器用户身份的会话方式，但是两者的应用场景不太一样。

__Cookie一般用来保存用户信息__,比如：
1. 我们在Cookie中保存已经登录过的用户信息，下次访问网站的时候页面可以自动帮你把登录的一些基本信息给填了；
2. 一般的网站都会有保持登录，也就是说下次再访问网站的时候就不需要重新登录了，因为用户登录的时候放了一个Token在Cookie中，下次登录的时候只需要根据Token值来查找用户即可(为了安全考虑，重新登录一般要将Token重写)；
3. 登录一次网站后访问网站其他页面不需要重新登陆。

__Session的主要作用就是通过服务端记录用户的状态__，比如购物车场景，当要添加商品到购物车的时候，系统不知道是哪个用户操作的，因为HTTP协议是无状态的。服务端给特定的用户创建特定的Session之后就可以标识这个用户并且跟踪这个用户。

Cookie数据保存在客户端，Session数据保存在服务器端。
Cookie存储在客户端，而Session存储在服务器上，相对来说Session安全性更高。如果要在Cookie中存储一些敏感信息，不要直接写入Cookie中，最好能将Cookie加密，然后使用到的时候再去服务器端解密。
</span>

## HTTP和HTTPS
<span id="#jump7">

* __端口号__：HTTP默认是80，HTTPS默认是443.
* __URL前缀__：HTTP的URL前缀是http://，HTTPS的URL前缀是https://.
* __安全性和资源消耗__：HTTP协议运行在TCP之上，所有传输的内容都是明文，客户端和服务器端都无法验证对方的身份。HTTPS是运行在SSL/TLS之上的HTTP协议。所有的传顺内容都经过加密，加密采用对称加密，但对称加密的密钥通过服务器方的证书进行了非对称加密。所以来说，HTTP安全性没有HTTPS高，但HTTPS比HTTP耗费更多服务器资源。
</span>

## HTTP 1.0和HTTP 1.1
<span id="jump8">

1. __连接方式__：HTTP 1.0为短链接，HTTP 1.1支持长连接。
2. __状态响应码__：HTTP/1.1中新加入了大量的状态码，比如说，100(Continue)——在请求大资源前的预热请求，206(Partial Content)——范围请求的标识码，409(Conflict)——请求与当前资源的规定冲突。
3. __缓存处理__：在HTTP1.0中主要使用header里的if-Modified-Since，Expires来做为缓存判断的标准，HTTP1.1则引入了更多的缓存控制策略例如Entity tag，if-Unmodified-Since，if-Match，if-None-Match等更多可供选择的缓存头来控制缓存策略。
4. __带宽优化及网络连接的使用__：HTTP1.0中，存在一些浪费带宽的现象，例如客户端只是需要某个对象的一部分，而服务器却将整个对象送过来了，并且不支持断点续传功能，HTTP1.1在请求头引入了range头域，它允许只请求资源的某个部分，即返回码是206，这样就方便了开发者自由的选择以便于充分利用带宽和连接。
5. __Host头处理__：HTTP/1.1在请求头中加入了Host字段。
</span>













